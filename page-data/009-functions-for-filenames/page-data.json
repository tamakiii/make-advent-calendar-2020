{"componentChunkName":"component---src-templates-markdown-js","path":"/009-functions-for-filenames","result":{"data":{"markdownRemark":{"html":"<h1>ファイル名の関数</h1>\n<p>ファイル名に関する関数には <code class=\"language-text\">dir</code> や <code class=\"language-text\">notdir</code>、 <code class=\"language-text\">realpath</code>、 <code class=\"language-text\">abspath</code>、 <code class=\"language-text\">wildcard</code> などがあります。</p>\n<p>他にも <code class=\"language-text\">suffix</code> や <code class=\"language-text\">addsuffix</code> などの便利な関数がありますが、あまり使わないので必要に応じて調べて使うとよいと思います。</p>\n<h2>dir</h2>\n<p>dir は <code class=\"language-text\">names...</code> からディレクトリ部分を取り出します。</p>\n<div class=\"gatsby-highlight\" data-language=\"makefile\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-makefile line-numbers\"><code class=\"language-makefile\"><span class=\"token variable\">$</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">dir</span> names...<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>スラッシュ（<code class=\"language-text\">/</code>）を含まない場合は <code class=\"language-text\">./</code> を返します</p>\n<div class=\"gatsby-highlight\" data-language=\"makefile\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-makefile line-numbers\"><code class=\"language-makefile\"><span class=\"token symbol\">dir</span><span class=\"token punctuation\">:</span>\n\techo <span class=\"token variable\">$</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">dir</span> src/main.c Makefile<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\">$ <span class=\"token function\">make</span> <span class=\"token function\">dir</span>\n<span class=\"token builtin class-name\">echo</span> src/ ./\nsrc/ ./</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<h2>notdir</h2>\n<p>notdir は <code class=\"language-text\">names...</code> からディレクトリ部分を取り除いて返します。</p>\n<div class=\"gatsby-highlight\" data-language=\"makefile\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-makefile line-numbers\"><code class=\"language-makefile\"><span class=\"token variable\">$</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">notdir</span> names...<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>スラッシュを含まない場合はそのまま返します。含む場合は、最後のスラッシュまでが削除されます。</p>\n<div class=\"gatsby-highlight\" data-language=\"makefile\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-makefile line-numbers\"><code class=\"language-makefile\"><span class=\"token symbol\">notdir</span><span class=\"token punctuation\">:</span>\n\techo <span class=\"token variable\">$</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">notdir</span> src/main.c Makefile<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\">$ <span class=\"token function\">make</span> notdir\n<span class=\"token builtin class-name\">echo</span> main.c Makefile\nmain.c Makefile</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<h2>realpath</h2>\n<p>realpath は <code class=\"language-text\">names...</code> の <code class=\"language-text\">realpath</code> を返します。失敗した場合は空の文字列を返します。</p>\n<div class=\"gatsby-highlight\" data-language=\"makefile\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-makefile line-numbers\"><code class=\"language-makefile\"><span class=\"token variable\">$</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">realpath</span> names...<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"makefile\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-makefile line-numbers\"><code class=\"language-makefile\"><span class=\"token symbol\">realpath</span><span class=\"token punctuation\">:</span>\n\techo <span class=\"token variable\">$</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">realpath</span> src/main.c Makefile<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"token function\">make</span> realpath\n<span class=\"token builtin class-name\">echo</span> /work/example/009/Makefile\n/work/example/009/Makefile</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<p>詳しくは <code class=\"language-text\">man 3 realpath</code> を参照してください。\n簡素な Makefile ではワーキングディレクトリからの相対パスで事足りるため、あまり使う機会はないかもしれません。</p>\n<h2>abspath</h2>\n<p>abspath は <code class=\"language-text\">names...</code> の各ファイル名に対して、絶対パスを返します。</p>\n<div class=\"gatsby-highlight\" data-language=\"makefile\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-makefile line-numbers\"><code class=\"language-makefile\"><span class=\"token variable\">$</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">abspath</span> names...<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<p>realpath とは対照的に、abspath はシンボリックリンクを解決せず、ファイルやディレクトリが存在するかをチェックしません。\n存在するファイル名だけを扱いたい場合には <code class=\"language-text\">wildcard</code> 関数を使います。</p>\n<div class=\"gatsby-highlight\" data-language=\"makefile\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-makefile line-numbers\"><code class=\"language-makefile\"><span class=\"token symbol\">abspath</span><span class=\"token punctuation\">:</span>\n\techo <span class=\"token variable\">$</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">abspath</span> src/main.c Makefile<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"token function\">make</span> abspath\n<span class=\"token builtin class-name\">echo</span> /work/example/009/src/main.c /work/example/009/Makefile\n/work/example/009/src/main.c /work/example/009/Makefile</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span></span></pre></div>\n<h2>wildcard</h2>\n<p>wildcard はワイルドカード（<code class=\"language-text\">*</code>）を含むパターンに一致し存在するファイル名を返します。</p>\n<div class=\"gatsby-highlight\" data-language=\"makefile\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-makefile line-numbers\"><code class=\"language-makefile\"><span class=\"token variable\">$</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">wildcard</span> pattern<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"makefile\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-makefile line-numbers\"><code class=\"language-makefile\"><span class=\"token symbol\">wildcard</span><span class=\"token punctuation\">:</span>\n\techo <span class=\"token variable\">$</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">wildcard</span> *e<span class=\"token punctuation\">)</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span></span></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-shell line-numbers\"><code class=\"language-shell\"><span class=\"token function\">ls</span>\nMakefile  fuga  hoge\n<span class=\"token function\">make</span> wildcard\n<span class=\"token builtin class-name\">echo</span> hoge Makefile\nhoge Makefile</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<h2>リンク</h2>\n<ul>\n<li><a href=\"https://www.gnu.org/software/make/manual/html_node/File-Name-Functions.html\">https://www.gnu.org/software/make/manual/html_node/File-Name-Functions.html</a></li>\n<li><a href=\"https://github.com/mirror/make/blob/fcc11d05a60b061027a50b76d146c43306b20e32/src/function.c#L2227\">https://github.com/mirror/make/blob/fcc11d05a60b061027a50b76d146c43306b20e32/src/function.c</a></li>\n<li><a href=\"https://github.com/mirror/make/blob/4.2.1/tests/scripts/functions/realpath\">https://github.com/mirror/make/blob/4.2.1/tests/scripts/functions/realpath</a></li>\n</ul>","excerpt":"ファイル名の関数 ファイル名に関する関数には  や 、 、 、  などがあります。 他にも  や  などの便利な関数がありますが、あまり使わないので必要に応じて調べて使うとよいと思います。 dir dir は  からディレクトリ部分を取り出します。 スラッシュ（）を含まない場合は  を返します notdir notd…","frontmatter":{"date":"December 09, 2020","slug":"/009-functions-for-filenames","title":"ファイル名の関数"}}},"pageContext":{"slug":"/009-functions-for-filenames","nodes":[{"node":{"frontmatter":{"slug":"/001-makefile-in-2020","title":"2020年の Makefile"}}},{"node":{"frontmatter":{"slug":"/002-phony-target-and-prerequisites","title":"偽のターゲットと前提条件"}}},{"node":{"frontmatter":{"slug":"/003-variable","title":"変数"}}},{"node":{"frontmatter":{"slug":"/004-automatic-variable","title":"自動変数"}}},{"node":{"frontmatter":{"slug":"/005-c-and-f-option","title":"-C オプションと -f オプション"}}},{"node":{"frontmatter":{"slug":"/006-default-target","title":"デフォルトターゲット"}}},{"node":{"frontmatter":{"slug":"/007-exit-status","title":"終了ステータス"}}},{"node":{"frontmatter":{"slug":"/008-text-functions","title":"文字列の関数"}}},{"node":{"frontmatter":{"slug":"/009-functions-for-filenames","title":"ファイル名の関数"}}},{"node":{"frontmatter":{"slug":"/010-functions-for-lists","title":"リストの関数"}}},{"node":{"frontmatter":{"slug":"/011-shell-function","title":"shell 関数"}}}]}},"staticQueryHashes":["3649515864","63159454"]}